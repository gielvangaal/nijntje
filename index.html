<!-- 1 : toegevoed door Nijntje, later weer toevoegen maar voor devops even weg -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <style>
        :root {
            ---fs-small: ;
            ---fs-medium: clamp(0.75rem, 1vw, 2rem);
            ---fs-large: clamp(1.5rem, 2vw, 2.5rem);
            ---fs-xl: clamp(2rem, 3vw, 4rem);
            ---fs-xxl: clamp(3rem, 4vw, 5rem);

            ---ad-bg: aliceblue;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: Georgia, 'Times New Roman', Times, serif;
            box-sizing: border-box;
        }

        nav {
            display: flex;
            justify-content: space-between;
            position: fixed;
            width: 100%;
            z-index: 5;
            mix-blend-mode: difference;
            color: white;
        }

        nav div {
            margin: 10px 25px;
        }

        .hero-section {
            background: linear-gradient(to right, lightblue, rgb(232, 232, 232));
            height: 100vh;
            width: 100vw;
            display: grid;
            grid-template-columns: repeat(10, 10%);
            grid-template-rows: repeat(10, 10%);
        }

        .hero-image {
            /* background: linear-gradient(to right, blueviolet, rgb(182, 147, 215)); */
            width: 100%;
            align-items: center;
            justify-content: center;
            display: flex;
            filter: drop-shadow(4px 4px 10px rgba(0, 0, 0, 0.5));
            z-index: 1;
            grid-row: 2 / 10;
            grid-column: 4 / 8;
        }

        .hero-image img {
            width: auto;
            max-width: 100%;
            max-height: 100%;
            filter: drop-shadow(4px 4px 10px rgba(0, 0, 0, 0.5));
        }

        .p-left {
            box-sizing: border-box;
            font-size: var(---fs-medium);
            grid-row: 5 / 6;
            grid-column: 1 / 2;
            /* background-color: aliceblue; */
            margin: 0;
            padding: 0 0 0 10px;
            width: 100%;
            height: 100%;
            word-wrap: break-word;
        }

        .p-right {
            box-sizing: border-box;
            font-size: var(---fs-medium);
            grid-row: 5 / 6;
            grid-column: 10 / 11;
            /* background-color: aliceblue; */
            margin: 0;
            padding: 0 10px 0 0;
            width: 100%;
            height: 100%;
            word-wrap: break-word;
        }

        h1 {
            grid-row: 7 / 9;
            grid-column: 6 / 10;
            width: 100%;
            height: 100%;
            font-size: clamp(2rem, 5vw, 6rem);
            z-index: 2;
            padding: 0;
            margin: 0;
            mix-blend-mode: difference;
            color: white;
        }

        .photo-section {
            background: linear-gradient(to right, lightblue, rgb(232, 232, 232));
            height: 100vh;
            width: 100vw;
            display: grid;
            grid-template-columns: repeat(10, 10%);
            grid-template-rows: repeat(10, 10%);
        }

        .nijntje-photo {
            grid-row: 1 / 10;
            grid-column: 1 / 6;
            padding: 10px 0;
            /* background-color: var(---ad-bg);  */
            padding-left: 5%;
            overflow: hidden;
            display: flex;
            justify-content: center;
        }

        .nijntje-photo img {
            height: 100%;
            width: auto;
            filter: grayscale(100%) brightness(1.1);
        }

        #toggleButton {
            grid-row: 6 / 8;
            grid-column: 5 / 7;
            /* background-color: var(---ad-bg); */
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            font-size: var(---fs-large);
            z-index: 1;
            mix-blend-mode: difference;
            color: #ffc0cb;
        }

        #toggleButton:hover {
            color: whitesmoke;
            cursor: pointer;
            opacity: 0;
            animation: fadeIn 0.3s ease-in forwards;
        }

        @keyframes fadeIn {
            0% {
                opacity: 0;
            }

            100% {
                opacity: 1;
            }
        }

        /* 
        h2.scroll-me {
            text-align: center;
            
            top: 0;
            justify-self: center;
            margin: 50px 0 0;
            font-size: var(---fs-small);
        } */

        #photobook-container {
            grid-row: 1 / 11;
            grid-column: 6 / 12;
            background-color: rgb(232, 232, 232);
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            grid-template-rows: auto;
            gap: 10px;
            overflow: scroll;
            margin: 50px 30px 25px 50px;
            padding: 10px;
        }

        #photobook-container.hidden {
            display: none;
        }

        #photobook-container.grid {
            display: grid;
        }

        #photobook-container div {
            position: relative;
            width: 100%;
            height: 200px;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #photobook-container div img {
            width: 170%;
            object-fit: contain;
            filter: grayscale(100%) brightness(1.1);
            opacity: 0.8;
        }

        #photobook-container img:hover {
            opacity: 1;
            cursor: pointer;
        }

        .messageboard {
            background: linear-gradient(to left, #f4930c, #dfc480);
            height: 50vh;
            width: 100vw;
            display: grid;
            grid-template-columns: repeat(5, 10%);
            grid-template-rows: repeat(5, 10%);
        }

        .messageboard h2 {
            grid-row: 1 / 11;
            grid-column: 10 / 11;
            /* max-width: 50px; */
            writing-mode: vertical-rl;
            color: lightblue;
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: var(---fs-xl);
        }

        #message-list {
            grid-row: 2 / 11;
            grid-column: 6 / 10;
            /* background-color: var(---ad-bg); */
            padding: 10px;
            overflow: scroll;
        }

        #message-form {
            grid-row: 2 / 6;
            grid-column: 1 / 6;
            /* background-color: var(---ad-bg); */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 10px;
        }


        /* SM: portrait phones, less than 576.98px */
        @media (max-width: 575.98px) {
            .nijntje-photo {
                grid-row: 1 / 5;
                grid-column: 1 / 11;
                padding: 10px 20px 0 0;
            }

            #toggleButton {
            grid-row: 5 / 6;
            grid-column: 4 / 7;
            }

            h2 {
                grid-row: 4 / 6;
                grid-column: 3 / 6;
            }

            #photobook-container {
                grid-row: 6 / 11;
                grid-column: 1 / 11;
                /* padding: 0; */
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }

        }
    </style>
</head>

<body>
    <nav>
        <div>
            menu
        </div>
        <div>
            contact
        </div>
    </nav>


    <section class="hero-section">

        <p class="p-left">Swsed3dfert6RDDDD-0M,MOI</p>

        <div class="hero-image">
            <img src="./recourses/images/nijntjepng.png">
        </div>
        <h1>Nijntie Nijn problems but a purrr ain't one</h1>
        <p class="p-right">//////////////;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; </p>
    </section>

    <section class="photo-section">

        <div class="nijntje-photo">
            <img src="./recourses/images/Nijntje-photo.png" alt="Nijntje met een pootje over de bank">
        </div>

        <h2 id="toggleButton">Meer foto's van Nijntje</h2>


        <div id="photobook-container" class="hidden">
            <!-- <h2 class="scroll-me">Scroll me &#8597;</h2> -->

            <div>
                <img src="./recourses/images/PHOTO-2024-10-14-18-19-15.jpg" alt="foto nijntje">
            </div>
            <div>
                <img src="./recourses/images/PHOTO-2024-10-14-18-19-16.jpg" alt="foto nijntje">
            </div>
            <div>
                <img src="./recourses/images/PHOTO-2024-10-14-18-19-17.jpg" alt="foto nijntje">
            </div>
            <div>
                <img src="./recourses/images/PHOTO-2024-10-14-18-19-18.jpg" alt="foto nijntje">
            </div>
            <div>
                <img src="./recourses/images/PHOTO-2024-10-14-18-19-19.jpg" alt="foto nijntje">
            </div>
            <div>
                <img src="./recourses/images/PHOTO-2024-10-14-18-19-20.jpg" alt="foto nijntje">
            </div>
            <div>
                <img src="./recourses/images/PHOTO-2024-10-14-18-19-20.jpg" alt="foto nijntje">
            </div>
            <div>
                <img src="./recourses/images/PHOTO-2024-10-14-18-19-15.jpg" alt="foto nijntje">
            </div>
            <div>
                <img src="./recourses/images/PHOTO-2024-10-14-18-19-16.jpg" alt="foto nijntje">
            </div>
            <div>
                <img src="./recourses/images/PHOTO-2024-10-14-18-19-17.jpg" alt="foto nijntje">
            </div>
            <div>
                <img src="./recourses/images/PHOTO-2024-10-14-18-19-18.jpg" alt="foto nijntje">
            </div>
            <div>
                <img src="./recourses/images/PHOTO-2024-10-14-18-19-19.jpg" alt="foto nijntje">
            </div>
            <div>
                <img src="./recourses/images/PHOTO-2024-10-14-18-19-20.jpg" alt="foto nijntje">
            </div>
            <div>
                <img src="./recourses/images/PHOTO-2024-10-14-18-19-20.jpg" alt="foto nijntje">
            </div>
        </div>


    </section>

    <section class="messageboard">

        <h2>Zeg hallo tegen Nijntje</h2>

        <form id="message-form">
            <input type="text" name="username" placeholder="Your name" required>
            <textarea name="content" placeholder="Your message" required></textarea>
            <button type="submit">Post</button>
        </form>


        <ul id="message-list">
            <!-- Berichten worden hier geladen door JavaScript -->
        </ul>

    </section>

    <section>
        <h1>Neem contact op</h1>
        <form id="contactForm" action="send" method="POST">
            <label for="email">E-mail:</label>
            <input type="email" id="email" name="email" required>
            <br>
            <label for="message">Bericht:</label>
            <textarea id="message" name="message" required></textarea>
            <br>
            <button type="submit">Verstuur</button>
        </form>

        <div id="responseMessage"></div>

    </section>

    <script>

        // SWITCH IMAGE // 
        const images = document.querySelectorAll("#photobook-container img");
        const displayContainer = document.querySelector(".nijntje-photo");

        // Iterate over the NodeList and add the click event listener to each image
        images.forEach((img) => {
            img.addEventListener("click", function () {
                // Create a new image element to display
                const clickedImage = document.createElement("img");
                clickedImage.src = img.src; // Use the src of the clicked image
                clickedImage.alt = img.alt; // Use the alt text of the clicked image

                // Clear the display container and append the new image
                displayContainer.innerHTML = ""; // Clear previous image
                displayContainer.appendChild(clickedImage); // Append the clicked image
            });
        });


        // TOGGLE BUTTON //
        document.getElementById("toggleButton").addEventListener("click", function () {
            const div = document.getElementById("photobook-container");
            const header = document.querySelector(".photo-section h2");
            let orginal = document.querySelector(".nijntje-photo img");
            let orignal = orginal.outerHTML;

            if (div.classList.contains("hidden")) {
                div.classList.remove("hidden");
                div.classList.add("grid");
                header.textContent = "Sluit venster";
            }

            else {
                div.classList.remove("grid");
                div.classList.add("hidden");
                header.textContent = "Meer foto's van Nijntje";
                document.querySelector(".nijntje-photo").innerHTML = '<img src="./recourses/images/Nijntje-photo.png" alt="Nijntje met een pootje over de bank">';
                console.log(orginal);
            }
        });

        // API MESSAGEBOARD
        document.addEventListener('DOMContentLoaded', function () {
            const messageList = document.querySelector('#message-list');
            const messageForm = document.querySelector('#message-form');
            const usernameInput = document.querySelector('input[name="username"]');
            const contentInput = document.querySelector('textarea[name="content"]');

            // Functie om berichten op te halen
            function fetchMessages() {
                fetch('https://gielvangaal.nl/board/api/messages/')
                    .then(response => response.json())
                    .then(data => {
                        console.log(data);
                        messageList.innerHTML = '';
                        data.forEach(message => {
                            const listItem = document.createElement('li');
                            listItem.innerHTML = `<strong>${message.username}</strong> - ${message.formatted_date} - ${message.formatted_time}<br> ${message.content}`;
                            messageList.appendChild(listItem);
                        });
                    });
            }

            // Functie om een nieuw bericht te versturen
            messageForm.addEventListener('submit', function (e) {
                e.preventDefault();

                const messageData = {
                    username: usernameInput.value,
                    content: contentInput.value,
                };

                fetch('https://gielvangaal.nl/board/api/messages/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-CSRFToken': '{{ csrf_token }}' // Zorg ervoor dat je een CSRF-token toevoegt
                    },
                    body: JSON.stringify(messageData)
                })
                    .then(response => response.json())
                    .then(data => {
                        fetchMessages(); // Herlaad de berichten na het verzenden van een nieuw bericht
                        messageForm.reset(); // Formulier leegmaken
                    });
            });

            // Initialiseer de berichten bij het laden van de pagina
            fetchMessages();
        });

        // API CONTACTFORM

        document.getElementById("contactForm").addEventListener("submit", async (e) => {
            e.preventDefault(); // Voorkomt het standaard submit gedrag

            const form = e.target; // Het formulier dat is verzonden
            const formDataObj = {}; // Object om de formuliergegevens op te slaan
            new FormData(form).forEach((value, key) => {
                formDataObj[key] = value;
            });

            console.log(formDataObj); // Log de gegevens voor debuggen

            // Zet het object om naar een URL-gecodeerde string
            const urlEncodedData = new URLSearchParams(formDataObj).toString();

            try {
                const response = await fetch(form.action, {
                    method: form.method, // Gebruik de methode die in het formulier is gespecificeerd
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded', // Geef aan dat we URL-gecodeerde gegevens verzenden
                    },
                    body: urlEncodedData, // Gebruik de URL-gecodeerde gegevens
                });

                const message = await response.text(); // Haal de response-tekst op
                document.getElementById("responseMessage").innerText = message; // Laat de response-tekst zien in de HTML

            } catch (error) {
                console.error("Error:", error);
                document.getElementById("responseMessage").innerText = "Fout bij het verzenden van het bericht.";
            }
        });


    </script>
</body>

</html>